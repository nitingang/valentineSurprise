<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Will you be my Valentine?</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#ff6b81;--accent2:#ffd166;--muted:#cbd5e1}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{display:flex;align-items:center;justify-content:center;background:radial-gradient(1200px 600px at 10% 10%, rgba(255,107,129,0.08), transparent), linear-gradient(180deg,#071023 0%, #08102a 60%);color:var(--muted)}
    .wrap{width:min(920px,96vw);background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:18px;padding:28px;box-shadow:0 10px 40px rgba(2,6,23,0.6);position:relative;overflow:hidden}
    header{display:flex;align-items:center;gap:14px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#ffb3c6);display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:22px}
    h1{margin:0;font-size:30px;color:white}
    .card{margin-top:18px;padding:36px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:12px;display:flex;flex-direction:column;align-items:center;gap:18px}
    .question{font-size:22px;color:#f8fafc;text-align:center}
    .btnrow{display:flex;gap:16px;align-items:center}
    .btn{padding:12px 22px;border-radius:12px;border:0;font-weight:600;font-size:16px;cursor:pointer}
    .btn-yes{background:linear-gradient(90deg,var(--accent),#ff8fa3);color:white;box-shadow:0 6px 18px rgba(255,107,129,0.12)}
    .btn-no{background:transparent;color:white;border:2px solid rgba(255,255,255,0.06);position:relative}
    .hint{font-size:13px;color:rgba(255,255,255,0.55);margin-top:6px}

    /* success screen *//
    .success{position:relative;min-height:320px;display:none;flex-direction:column;align-items:center;justify-content:center;padding:28px;gap:16px}
    .big-heart{font-size:96px;line-height:1;margin:0;transform:translateY(-6px)}
    .love-text{max-width:760px;text-align:center;color:#fff;font-size:18px}

    /* gift spinner */
    .gift-card{margin-top:12px;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;gap:18px;align-items:center}
    #wheelCanvas{width:280px;height:280px;border-radius:50%;background:transparent}
    .controls{display:flex;flex-direction:column;gap:8px}
    .spin-btn{padding:10px 16px;border-radius:10px;background:linear-gradient(90deg,var(--accent2),#ffd8a8);border:0;font-weight:700;cursor:pointer}
    .prize{min-width:200px;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);text-align:center}

    footer{position:absolute;right:18px;bottom:12px;font-size:12px;color:rgba(255,255,255,0.35)}

    /* playful moving no button - keep it on top */
    .btn-no{position:absolute}

    @media (max-width:560px){
      .card{padding:18px}
      .logo{width:48px;height:48px}
      .big-heart{font-size:64px}
      #wheelCanvas{width:200px;height:200px}
    }
  </style>
</head>
<body>
  <div class="wrap" id="wrap">
    <header>
      <div class="logo">‚ô•</div>
      <div>
        <h1>A little surprise</h1>
        <div style="font-size:13px;color:rgba(255,255,255,0.45)">Open this with love üíå</div>
      </div>
    </header>

    <div class="card" id="frontCard">
      <div class="question">Will you be my valentine?</div>
      <div class="btnrow" style="position:relative;width:100%;height:72px;align-items:center;justify-content:center">
        <button class="btn btn-yes" id="yesBtn">Yes üíñ</button>
        <button class="btn btn-no" id="noBtn" style="left:60%;top:6px">No</button>
      </div>
      <div class="hint">(Try to click the <strong>No</strong> button ‚Äî it has other plans üòÑ)</div>
    </div>

    <div class="success" id="success">
      <div class="big-heart">üíò</div>
      <div class="love-text" id="loveText">
        <strong>My dearest,</strong>
        <p style="margin:10px 0">You turn small moments into memories ‚Äî your smile makes ordinary days feel like celebrations. I love your laugh, your kindness, and the way you make every day better just by being you. Will you be my valentine?</p>
        <p style="margin:10px 0">Spin the wheel below for a little surprise ‚Äî just for fun, and to see that extra smile I love so much.</p>
        <p style="margin:10px 0">‚Äî Nitin ‚ù§Ô∏è</p>
      </div>

      <div class="gift-card">
        <canvas id="wheelCanvas" width="560" height="560" style="width:280px;height:280px"></canvas>
        <div class="controls">
          <div class="prize" id="prizeLabel">Spin to reveal your gift</div>
          <button class="spin-btn" id="spinBtn">Spin</button>
          <div style="font-size:12px;color:rgba(255,255,255,0.45);max-width:220px">Default options are editable inside the HTML file (search for <code>SPIN_OPTIONS</code>). If you'd like, replace them with your personalized gift ideas.</div>
        </div>
      </div>
    </div>

    <footer>Made with ‚ù§Ô∏è ‚Äî a tiny playful surprise</footer>
  </div>

<script>
// ----------------- Configuration (edit these) -----------------
const SPIN_OPTIONS = [
  'better luck next time',
  'hard cash as much as you want',
  'I will decide what I want and let you know',
  'I allow you to give anything of your choice',
  'wohoo, you won rupees 1001.'
];
// ----------------- End configuration -------------------------

// moving NO button logic
const wrap = document.getElementById('wrap');
const noBtn = document.getElementById('noBtn');
const yesBtn = document.getElementById('yesBtn');
const frontCard = document.getElementById('frontCard');
const success = document.getElementById('success');

// keep no button within the .card area
function moveNoRandom() {
  const cardRect = frontCard.getBoundingClientRect();
  const wrapRect = wrap.getBoundingClientRect();
  const btnRect = noBtn.getBoundingClientRect();
  const maxX = cardRect.width - btnRect.width - 12;
  const maxY = cardRect.height - btnRect.height - 12;
  const x = Math.max(6, Math.floor(Math.random() * (maxX || 1)));
  const y = Math.max(6, Math.floor(Math.random() * (maxY || 1)));
  // set relative to btnrow container
  noBtn.style.left = x + 'px';
  noBtn.style.top = y + 'px';
}

// move after short delay on hover/touch
let moving = false;
noBtn.addEventListener('mouseenter', () => { if (!moving) { moving = true; moveNoRandom(); setTimeout(()=> moving=false, 300); } });
noBtn.addEventListener('touchstart', (e)=>{ e.preventDefault(); moveNoRandom(); });
noBtn.addEventListener('click', (e)=>{ e.preventDefault(); moveNoRandom(); });

// make it playful: also slightly drift every 3 seconds so it's lively
setInterval(()=>{ moveNoRandom(); }, 3500);

// YES button shows the success content
yesBtn.addEventListener('click', () => {
  frontCard.style.display = 'none';
  success.style.display = 'flex';
  // initialize wheel when shown
  setTimeout(()=> initWheel(SPIN_OPTIONS), 120);
});

// ----------- Wheel implementation (canvas) --------------
const canvas = document.getElementById('wheelCanvas');
const ctx = canvas.getContext('2d');
const spinBtn = document.getElementById('spinBtn');
const prizeLabel = document.getElementById('prizeLabel');
let wheel; // store wheel state

function initWheel(options){
  // create a scaled drawing for high-DPI screens
  const DPR = window.devicePixelRatio || 1;
  const size = Math.min(canvas.width, canvas.height);
  canvas.width = size; canvas.height = size;
  canvas.style.width = (size/2)+'px'; canvas.style.height = (size/2)+'px';
  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,canvas.width,canvas.height);

  wheel = new Wheel(canvas, options);
  wheel.draw();
}

class Wheel{
  constructor(canvas, options){
    this.canvas = canvas; this.ctx = canvas.getContext('2d');
    this.options = options.slice();
    this.size = canvas.width;
    this.center = this.size/2;
    this.radius = this.size/2 - 8;
    this.rotation = 0; // radians
  }
  draw(){
    const ctx = this.ctx; const opts = this.options; const n = opts.length;
    ctx.clearRect(0,0,this.size,this.size);
    ctx.save();
    ctx.translate(this.center,this.center);
    ctx.rotate(this.rotation);
    const arc = (Math.PI*2)/n;
    for(let i=0;i<n;i++){
      const start = i*arc;
      // nice color by hsl
      ctx.beginPath();
      ctx.fillStyle = `hsl(${(i*360/n)},70%,60%)`;
      ctx.moveTo(0,0);
      ctx.arc(0,0,this.radius, start, start+arc);
      ctx.closePath();
      ctx.fill();

      // text
      ctx.save();
      ctx.rotate(start+arc/2);
      ctx.translate(this.radius*0.58,0);
      ctx.rotate(Math.PI/2);
      ctx.fillStyle = '#111827';
      ctx.font = `${Math.max(12, this.size/24)}px sans-serif`;
      const txt = opts[i];
      this.wrapText(ctx, txt, 0, 0, this.radius*0.6, Math.max(12, this.size/28));
      ctx.restore();
    }
    ctx.restore();

    // pointer
    ctx.fillStyle = '#ffdede';n
    ctx.beginPath();
    ctx.moveTo(this.size/2 - 6, this.center - 4);
    ctx.lineTo(this.size/2 + 20, this.center);
    ctx.lineTo(this.size/2 - 6, this.center + 4);
    ctx.closePath();
    ctx.fill();
  }
  wrapText(ctx, text, x, y, maxWidth, lineHeight){
    const words = text.split(' ');
    let line = '', lines = [], test;
    for(let n=0;n<words.length;n++){
      test = line + words[n] + ' ';
      if(ctx.measureText(test).width > maxWidth && n>0){ lines.push(line.trim()); line = words[n] + ' '; } else { line = test; }
    }
    lines.push(line.trim());
    for(let i=0;i<lines.length;i++){
      ctx.fillText(lines[i], x, y + i*lineHeight);
    }
  }
}

// spin mechanics
let spinning = false;
spinBtn.addEventListener('click', async ()=>{
  if(!wheel || spinning) return;
  spinning = true;
  prizeLabel.textContent = 'Spinning...';
  const n = wheel.options.length;
  // full rotations + random target
  const full = Math.floor(Math.random()*4) + 4; // 4-7 turns
  const targetIndex = Math.floor(Math.random()*n);
  // compute target angle so that the chosen segment lands at pointer (right side)
  const arc = (2*Math.PI)/n;
  // pointer angle = 0 (to the right), wheel rotation such that segment center at 0
  const finalRotation = (full*2*Math.PI) + ( (Math.PI*2) - (targetIndex*arc + arc/2) );

  // animate rotation with easing
  const duration = 4200 + Math.floor(Math.random()*1200);
  const start = performance.now();
  const startRot = wheel.rotation;
  function easeOutCubic(t){ return 1 - Math.pow(1-t,3); }
  function frame(now){
    const t = Math.min(1, (now-start)/duration);
    const eased = easeOutCubic(t);
    wheel.rotation = startRot + (finalRotation - startRot)*eased;
    wheel.draw();
    if(t<1) requestAnimationFrame(frame);
    else {
      spinning = false;
      const chosen = wheel.options[targetIndex];
      prizeLabel.innerHTML = `<strong>Congratulations!</strong><div style=\"margin-top:8px\">${chosen}</div>`;
    }
  }
  requestAnimationFrame(frame);
});

// initialize with front positioning for no button
window.addEventListener('load', ()=>{ moveNoRandom(); });

</script>
</body>
</html>
